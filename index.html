<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#000000">
  <title>Installa ARTBOOMS</title>

  <meta name="description" content="Installa ARTBOOMS, il magazine online d'arte contemporanea.">
  <link rel="canonical" href="https://www.artbooms.com/">

  <!-- PWA -->
  <link rel="manifest" href="/manifest.json">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <!-- Icone -->
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192.png">
  <link rel="apple-touch-icon" href="/icons/icon-512.png">

  <style>
    body {
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-start;
      min-height:100vh;
      margin:0;
      background:#fff;
      font-family:"Times New Roman","Imperial",serif;
      color:#000;
      text-align:center;
      overflow:hidden;
    }

    /* Logo con margine superiore */
    #logo {
      max-width:85%;
      height:auto;
      margin-top:60px;
      margin-bottom:20px;
    }

    /* --- POPUP STYLE --- */
    .bubble {
      position:fixed;
      background:#e0f0ff;
      color:#000;
      border:1px solid #444;
      border-radius:14px;
      box-shadow:0 3px 10px rgba(0,0,0,0.25);
      font-family:"Times New Roman","Imperial",serif;
      font-size:0.9rem;
      line-height:1.4;
      padding:14px 20px;
      width:80%;
      max-width:300px;
      text-align:center;
      z-index:1000;
      display:none;
    }

    .bubble b { font-weight:700; }

    .bubble::after {
      content:"";
      position:absolute;
      bottom:-10px;
      left:50%;
      transform:translateX(-50%);
      border-width:10px 10px 0 10px;
      border-style:solid;
      border-color:#e0f0ff transparent transparent transparent;
    }

    /* Prima nuvoletta */
    #bubble1 {
      bottom:100px;
      left:50%;
      transform:translateX(-50%);
    }

    /* Icona Safari */
    #safariIcon {
      position:fixed;
      bottom:35px;
      left:50%;
      transform:translateX(-50%);
      width:42px;
      height:42px;
      background:url('https://upload.wikimedia.org/wikipedia/commons/4/4e/Safari_browser_logo.svg') center/contain no-repeat;
      opacity:0.95;
      cursor:pointer;
      z-index:1001;
    }

    /* Seconda nuvoletta */
    #bubble2 {
      bottom:30%;
      left:50%;
      transform:translateX(-50%);
    }
  </style>
</head>

<body>
  <!-- Logo in formato webp con fallback jpg -->
  <picture>
    <source srcset="/images/artbooms-logo.webp" type="image/webp">
    <img id="logo" src="/images/artbooms-logo.jpg" alt="ARTBOOMS logo">
  </picture>

  <!-- Prima nuvoletta -->
  <div id="bubble1" class="bubble">
    <span>Per installare l‚Äôapp<br><b>tocca il pulsante di condivisione qui sotto ‚¨áÔ∏è</b></span>
  </div>

  <!-- Icona Safari / Condividi -->
  <div id="safariIcon" title="Pulsante Condividi"></div>

  <!-- Seconda nuvoletta -->
  <div id="bubble2" class="bubble">
    <span>Ora scegli:<br><b>Aggiungi alla schermata Home üì±</b></span>
  </div>

  <script>
    // Registra il service worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js').catch(console.error);
    }

    window.addEventListener('load', () => {
      const ua = navigator.userAgent;
      const isiOS = /iphone|ipad|ipod/i.test(ua);
      const isSafari = /safari/i.test(ua) && !/crios|fxios|edgios/i.test(ua);
      const bubble1 = document.getElementById('bubble1');
      const bubble2 = document.getElementById('bubble2');
      const safariIcon = document.getElementById('safariIcon');

      // Solo per Safari su iPhone/iPad
      if (isiOS && isSafari) {
        bubble1.style.display = 'block';
        safariIcon.style.display = 'block';

        safariIcon.addEventListener('click', () => {
          bubble1.style.display = 'none';
          bubble2.style.display = 'block';
          setTimeout(() => bubble2.style.display = 'none', 6000);
        });
      } else {
        // Niente pop-up su Android o desktop
        bubble1.style.display = 'none';
        bubble2.style.display = 'none';
        safariIcon.style.display = 'none';
      }
    });
  </script>
</body>
</html>
