<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#000000">
  <title>Installa ARTBOOMS</title>

  <meta name="description" content="Installa ARTBOOMS, il magazine online d'arte contemporanea.">
  <link rel="canonical" href="https://www.artbooms.com/">

  <!-- PWA -->
  <link rel="manifest" href="/manifest.json">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <!-- Icone -->
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192.png">
  <link rel="apple-touch-icon" href="/icons/icon-512.png">

  <style>
    body {
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      min-height:100vh;
      margin:0;
      background:#fff;
      font-family:"Times New Roman","Imperial",serif;
      color:#000;
      text-align:center;
      overflow:hidden;
    }

    /* Logo del sito */
    #logo {
      max-width:85%;
      height:auto;
      margin-bottom:15px;
    }

    /* Link grigio chiaro sotto al logo */
    #backLink {
      font-size:0.85rem;
      color:#999;
      margin-bottom:30px;
      text-decoration:none;
    }

    /* --- FUMETTI --- */
    .bubble {
      position:fixed;
      background:#e0f0ff;
      color:#000;
      font-family:"Times New Roman","Imperial",serif;
      font-size:0.9rem;
      padding:14px 20px;
      border-radius:18px;
      box-shadow:0 3px 15px rgba(0,0,0,0.25);
      z-index:1000;
      width:250px;                 /* dimensione fissa */
      text-align:center;
      line-height:1.4;
      display:none;
    }

    .bubble b { font-weight:700; font-size:1rem; }

    /* Triangolino azzurro verso il basso */
    .bubble::after {
      content:"";
      position:absolute;
      bottom:-12px;
      left:50%;
      transform:translateX(-50%);
      border-width:12px 10px 0 10px;
      border-style:solid;
      border-color:#e0f0ff transparent transparent transparent;
    }

    /* Prima nuvoletta */
    #bubble1 {
      bottom:90px;                 /* appena sopra l'icona Safari */
      left:50%;
      transform:translateX(-50%);
    }

    /* Icona Safari sotto il primo fumetto */
    #safariIcon {
      position:fixed;
      bottom:25px;
      left:50%;
      transform:translateX(-50%);
      width:40px;
      height:40px;
      background:url('https://upload.wikimedia.org/wikipedia/commons/4/4e/Safari_browser_logo.svg') center/contain no-repeat;
      opacity:0.85;
      cursor:pointer;
    }

    /* Seconda nuvoletta */
    #bubble2 {
      bottom:30%;                  /* sopra il menu a tendina iOS */
      left:50%;
      transform:translateX(-50%);
    }
  </style>
</head>

<body>
  <!-- Logo -->
  <img id="logo" src="/images/artbooms-logo.webp" alt="ARTBOOMS logo">

  <!-- Link per tornare al sito -->
  <a id="backLink" href="https://www.artbooms.com/" target="_blank" rel="noopener">per tornare alla home clicca qui</a>

  <!-- Primo fumetto -->
  <div id="bubble1" class="bubble">
    <span>Per scaricare lâ€™app<br><b>clicca qui</b></span>
  </div>

  <!-- Icona Safari -->
  <div id="safariIcon"></div>

  <!-- Secondo fumetto -->
  <div id="bubble2" class="bubble">
    <span>E adesso scegli:<br><b>Aggiungi alla schermata home</b></span>
  </div>

  <script>
    // Registra il service worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js').catch(console.error);
    }

    // Mostra i fumetti solo su dispositivi Apple
    window.addEventListener('load', () => {
      const isiOS = /iphone|ipad|ipod/i.test(navigator.userAgent);
      const bubble1 = document.getElementById('bubble1');
      const bubble2 = document.getElementById('bubble2');
      const safariIcon = document.getElementById('safariIcon');

      if (isiOS) {
        // mostra la prima nuvoletta
        bubble1.style.display = 'block';

        safariIcon.addEventListener('click', () => {
          // nascondi la prima e mostra la seconda
          bubble1.style.display = 'none';
          bubble2.style.display = 'block';

          // la seconda scompare dopo 6 secondi
          setTimeout(() => {
            bubble2.style.display = 'none';
          }, 6000);
        });
      } else {
        bubble1.style.display = 'none';
        bubble2.style.display = 'none';
        safariIcon.style.display = 'none';
      }
    });
  </script>
</body>
</html>
